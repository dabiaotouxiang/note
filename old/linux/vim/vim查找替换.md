vim 中的查找与替换

<!-- more -->

## 查找与替换
`:s`(substitute)命令用来查找和替换字符串。
```
:{作用范围}s/{目标}/{替换}/{替换标志}
```
例如`:%S/foo/bar/g`会在全局范围(`%`)查找`foo`并`bar`，所有的出现都会被替换(`g`)。

### 作用范围
作用范围分为当前行、全文、选区等等。

当前行:
```
:s/foo/bar/g
```

全文:
```
:%s/foo/bar/g
```

选区，在Visual模式下选择区域后输入`:`，Vim即可自动补全为`:'<,'>`。
```
:'<,'>s/foo/bar/g
```

2-11行
```
:5,12s/foo/bar/g
```

当前行`.`与接下来两行`+2`:
```
:.,+2s/foo/bar/g
```

### 替换标志
上文中命令结尾的`g`即是替换标志之一，表示全局`global`替换。还有很多其他的替换标志:

空替换标志表示只替换从光标位置开始，目标的第一次出现:
```
:%s/foo/bar
```

`i`表示大小写不敏感查找，`I`表示大小写敏感:
```
:%s/foo/bar/i
# 等效于模式中的\c（不敏感）或者\C（敏感）
:%s/foo\c/bar
```

`c`表示需要确认，例如全局查找`"foo"`替换为`"bar"`并且需要确认:
```
:%s/foo/bar/gc
```

回车后Vim会将光标移动到每一次`"foo"`出现的位置，并提示
```
replace with bar (y/n/a/q/1/^E/^Y)?
```
按下`y`表示替换，`n`表示不替换，`a`表示替换所有，`q`表示推出查找模式，`1`表示替换当前位置并退出。`^E`与`^Y`是光标移动快捷键。
